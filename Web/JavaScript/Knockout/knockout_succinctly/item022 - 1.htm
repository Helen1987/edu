<html lang='en'>
<head>
  <title>Interactive Bindings</title>
  <meta charset='utf-8' />
  <link rel='stylesheet' href='../style.css' />
  <script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js'></script>
</head>
<body>
  <h1>Interactive Bindings</h1>

  <form action="#" method="post">
    <p data-bind='event: {mouseover: showDetails, mouseout: hideDetails}'>
    	First name: <input data-bind='value: firstName' />
    	<span data-bind='visible: details'>Your given name</span>
    	</p>
    <p>Last name: <input data-bind='value: lastName' /></p>

   <p><button data-bind='click: saveUserData'>Submit</button></p>
   
   <p>
      <button data-bind='click: displayName'>
        Display Name
      </button>
      <button data-bind='click: setName'>
        Set Name
      </button>
    </p>

	    <p>Annoy me with special offers: <input data-bind='checked: annoyMe' type='checkbox' /></p>
   
   <div data-bind='visible: annoyMe'>
      <div data-bind="foreach: items">
        <input data-bind='checked: $root.annoyTimes, checkedValue: $data'
               type='checkbox' />
		<span data-bind="text: time"></span>
      </div>
    </div>

   
  </form>

  
  <script type='text/javascript'>
      function PersonViewModel() {
          var self = this;
		  this.items = ko.observableArray([
			ko.observable({id: '1',time: 'morning'}),
			ko.observable({id: '2',time: 'afternoon'}),
			ko.observable({id: '3',time: 'evening'})
		  ]);
          this.firstName = ko.observable("John");
          this.lastName = ko.observable("Smith");
		  this.details = ko.observable(false);
		  this.annoyMe = ko.observable(true);
		  this.annoyTimes = ko.observableArray([]);	
		  	
          this.saveUserData = function (model, event) {
              alert(model.firstName() + " is trying to checkout!");
              if (event.ctrlKey) {
                  alert("He was holding down the Control key for some reason.");
              }
          };
          
         this.displayName = function() {
        	alert(this.firstName());
      	};
      	this.setName = function() {
        	this.firstName("Bob");
      	};
      	
      	this.showDetails = function(target, event) {
          this.details(true);
      	};
      	this.hideDetails = function(target, event) {
          this.details(false);
      	};

      }

      ko.applyBindings(new PersonViewModel());
  </script>
</body>
</html>
