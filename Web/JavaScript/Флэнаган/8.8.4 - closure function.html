<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Переменные</title>
</head>
<body>	
	<script type="text/javascript">
		// Эта функция добавляет методы доступа к свойству объекта "o"
		// с заданными именами. Методы получают имена get<name>
		// и set<name>. Если дополнительно предоставляется
		// функция проверки, метод записи будет использовать ее
		// для проверки значения перед сохранением. Если функция проверки
		// возвращает false, метод записи генерирует исключение.
		//
		// Необычность такого подхода заключается в том, что значение
		// свойства, доступного методам, сохраняется не в виде свойства
		// объекта "o", а в виде локальной переменной этой функции.
		// Кроме того, методы доступа определены локально, в этой функции
		// и обеспечивают доступ к этой локальной переменной.
		// Примечательно, что значение доступно только для этих двух методов
		// и не может быть установлено или изменено иначе, как методом записи.
		function makeProperty(o, name, predicate) {
			var value; // This is the property value
			// Метод чтения просто возвращает значение.
			o["get" + name] = function() { return value; };
			// Метод записи сохраняет значение или генерирует исключение,
			// если функция проверки отвергает это значение.
			o["set" + name] = function(v) {
			if (predicate && !predicate(v))
				throw "set" + name + ": неверное значение " + v;
			else
				value = v;
			};
		}
		// Следующий фрагмент демонстрирует работу метода makeProperty().
		var o = {}; // Пустой объект
		// Добавить методы доступа к свойству с именами getName() и setName()
		// Обеспечить допустимость только строковых значений
		makeProperty(o, "Name", function(x) { return typeof x == "string"; });
		o.setName("Frank"); // Установить значение свойства
		document.write(o.getName( )); // Получить значение свойства
		o.setName(0); // Попытаться установить значение ошибочного типа
	</script>
</body>
</html>